"""
Test script for Avatar Generator Service
"""
import asyncio
import sys
import os
from pathlib import Path

# Add the parent directory to the path to import the avatar service
sys.path.append(str(Path(__file__).parent.parent))

from Avatar_generator.avatar_service import AvatarGeneratorService

async def test_avatar_service():
    """Test the avatar generator service"""
    print("ğŸ§ª Testing Avatar Generator Service...")
    
    # Initialize service
    try:
        service = AvatarGeneratorService()
        print("âœ… Avatar service initialized successfully")
    except Exception as e:
        print(f"âŒ Failed to initialize avatar service: {e}")
        return
    
    # Test 1: Get languages
    try:
        languages = service.get_languages()
        print(f"âœ… Languages retrieved: {len(languages['languages'])} languages supported")
        print(f"   Sample languages: {list(languages['languages'].keys())[:3]}")
    except Exception as e:
        print(f"âŒ Failed to get languages: {e}")
    
    # Test 2: Get voices for English
    try:
        voices = service.get_voices_for_language("en-IN")
        print(f"âœ… Voices for English: {voices['voices']}")
    except Exception as e:
        print(f"âŒ Failed to get voices: {e}")
    
    # Test 3: Translation (if API key is available)
    if os.getenv("SARVAM_API_KEY"):
        try:
            translated = service.translate_text("Hello, how are you?", "en-IN", "hi-IN")
            print(f"âœ… Translation test: 'Hello, how are you?' -> '{translated}'")
        except Exception as e:
            print(f"âš ï¸ Translation test failed (expected if API not configured): {e}")
    else:
        print("âš ï¸ Skipping translation test - SARVAM_API_KEY not set")
    
    print("ğŸ Avatar service test completed")

if __name__ == "__main__":
    asyncio.run(test_avatar_service())
