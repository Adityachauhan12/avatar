path = '/dbfs/FileStore/VideoReTalking/inference.py'

with open(path, 'r') as f:
    text = f.read()

# If GPEN model string exists, neutralize it
text = text.replace("model='GPEN-BFR-512'", "model=None")

# Make sure super-resolution via GPEN is disabled
text = text.replace('use_sr=True', 'use_sr=False')

with open(path, 'w') as f:
    f.write(text)

print("âœ… inference.py patched: GPEN disabled")
