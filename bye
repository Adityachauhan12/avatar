(venv) C:\Users\aditya.chauhan2\OneDrive - InterGlobe Aviation Limited\Desktop\IBC-365-BE\IBC-365-BE>python main.py
Debug - API Version: 2024-12-01-preview
Debug - API Key exists: True
Debug - API Base: https://openai-lab37-eastus2-sb-poc.openai.azure.com/openai/deployments/gpt-4o/chat/completions?api-version=2024-12-01-preview
Loaded permissions from local JSON file
üöÄ Starting IndiGo BluChip AI Search Backend...
üåê Server starting on: http://localhost:3000
üìö API docs available at: http://localhost:3000/docs
INFO:     Will watch for changes in these directories: ['C:\\Users\\aditya.chauhan2\\OneDrive - InterGlobe Aviation Limited\\Desktop\\IBC-365-BE\\IBC-365-BE']
INFO:     Uvicorn running on http://127.0.0.1:3000 (Press CTRL+C to quit)
INFO:     Started reloader process [13648] using WatchFiles
Debug - API Version: 2024-12-01-preview
Debug - API Key exists: True
Debug - API Base: https://openai-lab37-eastus2-sb-poc.openai.azure.com/openai/deployments/gpt-4o/chat/completions?api-version=2024-12-01-preview
Loaded permissions from local JSON file
Loaded permissions from local JSON file
INFO:     Started server process [13956]
INFO:     Waiting for application startup.
üöÄ Initializing RAG system...
üîß Setting up RAG system...
Debug - Available OpenAI-related environment variables:
  AZURE_OPENAI_API_VERSION: ‚úì
  AZURE_OPENAI_EMBEDDING_API_KEY: ‚úì
  AZURE_OPENAI_EMBEDDING_API_VERSION: ‚úì
  AZURE_OPENAI_EMBEDDING_BASE_URL: ‚úì
  AZURE_OPENAI_EMBEDDING_DEPLOYMENT: ‚úì
  AZURE_OPENAI_EMBEDDING_ENDPOINT: ‚úì
  ENDPOINT_NAME: ‚úì
  LLM_MODEL: ‚úì
  OPENAI_API_KEY: ‚úì
  OPENAI_BASE_URL: ‚úì
  OPENAI_ENDPOINT: ‚úì
  SARVAM_API_KEY: ‚úì
  VSCODE_DEBUGPY_ADAPTER_ENDPOINTS: ‚úì
üìö Processing FAQ data...
Extracted 98 Q&A pairs from FAQ
üß† Initializing RAG system with 98 Q&A pairs...
‚ùå Failed to initialize RAG system: COSMOS_DB_ENDPOINT and COSMOS_DB_KEY must be set in environment variables
ERROR:    Traceback (most recent call last):
  File "C:\Users\aditya.chauhan2\OneDrive - InterGlobe Aviation Limited\Desktop\IBC-365-BE\IBC-365-BE\main.py", line 108, in initialize_rag_system
    rag_system = CosmosRAG(llm_provider=llm_provider)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\aditya.chauhan2\OneDrive - InterGlobe Aviation Limited\Desktop\IBC-365-BE\IBC-365-BE\Ai_search\cosmos_rag_chatbot.py", line 496, in __init__
    self.vector_store = CosmosVectorStore(database_name, container_name)
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\aditya.chauhan2\OneDrive - InterGlobe Aviation Limited\Desktop\IBC-365-BE\IBC-365-BE\Ai_search\cosmos_rag_chatbot.py", line 281, in __init__
    raise ValueError("COSMOS_DB_ENDPOINT and COSMOS_DB_KEY must be set in environment variables")
ValueError: COSMOS_DB_ENDPOINT and COSMOS_DB_KEY must be set in environment variables

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\aditya.chauhan2\OneDrive - InterGlobe Aviation Limited\Desktop\IBC-365-BE\IBC-365-BE\venv\Lib\site-packages\starlette\routing.py", line 677, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "C:\Program Files\Python312\Lib\contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\aditya.chauhan2\OneDrive - InterGlobe Aviation Limited\Desktop\IBC-365-BE\IBC-365-BE\main.py", line 145, in lifespan
    initialize_rag_system()
  File "C:\Users\aditya.chauhan2\OneDrive - InterGlobe Aviation Limited\Desktop\IBC-365-BE\IBC-365-BE\main.py", line 135, in initialize_rag_system
    raise Exception(error_msg)
Exception: Failed to initialize RAG system: COSMOS_DB_ENDPOINT and COSMOS_DB_KEY must be set in environment variables

ERROR:    Application startup failed. Exiting.
