# CELL 3: Download ONNX Models + Config
# ============

from huggingface_hub import snapshot_download
import os

print("ðŸ“¥ Downloading ONNX models and config...")
print("=" * 60)

# Create checkpoints directory
checkpoints_dir = "./checkpoints"
os.makedirs(checkpoints_dir, exist_ok=True)

# Download config files
print("\nðŸ“¦ Downloading Ditto config...")
snapshot_download(
    repo_id="digital-avatar/ditto-talkinghead",
    local_dir=checkpoints_dir,
    allow_patterns=["ditto_cfg/*"],
)

print("âœ… Config downloaded")

# Download ONNX models (these get converted to TRT engines)
print("\nðŸ“¦ Downloading ONNX models for conversion...")
snapshot_download(
    repo_id="digital-avatar/ditto-onnx-models",  # ONNX source
    local_dir=checkpoints_dir,
    allow_patterns=["*.onnx"],
    ignore_patterns=["*.trt*"],  # Skip existing TRT engines
)

print("âœ… ONNX models downloaded")

# List what we got
print("\nðŸ“‚ checkpoints/ contents:")
for root, dirs, files in os.walk(checkpoints_dir):
    for file in files[:10]:  # First 10 files
        print(f"   ðŸ“„ {file}")

print("\nâœ… Ready for engine building!")
print("Next: Convert ONNX â†’ TensorRT engines...")
